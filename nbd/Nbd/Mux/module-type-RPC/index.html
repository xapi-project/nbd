<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>RPC (nbd.Nbd.Mux.RPC)</title><link rel="stylesheet" href="../../../../odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 1.5.2"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> – <a href="../../../index.html">nbd</a> &#x00BB; <a href="../../index.html">Nbd</a> &#x00BB; <a href="../index.html">Mux</a> &#x00BB; RPC</nav><h1>Module type <code>Mux.RPC</code></h1></header><dl><dt class="spec type" id="type-transport"><a href="#type-transport" class="anchor"></a><code><span class="keyword">type</span> transport</code></dt><dd><p>The transport mechanism used to send and receive messages</p></dd></dl><dl><dt class="spec type" id="type-id"><a href="#type-id" class="anchor"></a><code><span class="keyword">type</span> id</code></dt><dd><p>Each <code>request_hdr</code> and <code>response_hdr</code> carries an <code>id</code> that is used to match responses to requests.</p></dd></dl><dl><dt class="spec type" id="type-request_hdr"><a href="#type-request_hdr" class="anchor"></a><code><span class="keyword">type</span> request_hdr</code></dt><dt class="spec type" id="type-request_body"><a href="#type-request_body" class="anchor"></a><code><span class="keyword">type</span> request_body</code></dt><dt class="spec type" id="type-response_hdr"><a href="#type-response_hdr" class="anchor"></a><code><span class="keyword">type</span> response_hdr</code></dt><dt class="spec type" id="type-response_body"><a href="#type-response_body" class="anchor"></a><code><span class="keyword">type</span> response_body</code></dt></dl><dl><dt class="spec value" id="val-recv_hdr"><a href="#val-recv_hdr" class="anchor"></a><code><span class="keyword">val</span> recv_hdr : <a href="index.html#type-transport">transport</a> <span>&#45;&gt;</span> <span><span>(<span><a href="index.html#type-id">id</a> option</span> * <a href="index.html#type-response_hdr">response_hdr</a>)</span> Lwt.t</span></code></dt><dt class="spec value" id="val-recv_body"><a href="#val-recv_body" class="anchor"></a><code><span class="keyword">val</span> recv_body : <a href="index.html#type-transport">transport</a> <span>&#45;&gt;</span> <a href="index.html#type-request_hdr">request_hdr</a> <span>&#45;&gt;</span> <a href="index.html#type-response_hdr">response_hdr</a> <span>&#45;&gt;</span> <a href="index.html#type-response_body">response_body</a> <span>&#45;&gt;</span> <span><span><span>(unit, <a href="../../Protocol/Error/index.html#type-t">Protocol.Error.t</a>)</span> Stdlib.result</span> Lwt.t</span></code></dt><dd><p><code>recv_body transport request_hdr response_hdr response_body</code> returns <code>Ok ()</code> and receives and writes the body of the response into <code>response_body</code> if the request has been successful, otherwise returns an <code>Error</code>. The <code>request_hdr</code> parameter is the output of a preceding <code>recv_hdr</code> call.</p></dd></dl><dl><dt class="spec value" id="val-send_one"><a href="#val-send_one" class="anchor"></a><code><span class="keyword">val</span> send_one : <a href="index.html#type-transport">transport</a> <span>&#45;&gt;</span> <a href="index.html#type-request_hdr">request_hdr</a> <span>&#45;&gt;</span> <a href="index.html#type-request_body">request_body</a> <span>&#45;&gt;</span> <span>unit Lwt.t</span></code></dt><dd><p>Send a single request. Invocations of this function will not be interleaved because they are protected by a mutex</p></dd></dl><dl><dt class="spec value" id="val-id_of_request"><a href="#val-id_of_request" class="anchor"></a><code><span class="keyword">val</span> id_of_request : <a href="index.html#type-request_hdr">request_hdr</a> <span>&#45;&gt;</span> <a href="index.html#type-id">id</a></code></dt><dt class="spec value" id="val-handle_unrequested_packet"><a href="#val-handle_unrequested_packet" class="anchor"></a><code><span class="keyword">val</span> handle_unrequested_packet : <a href="index.html#type-transport">transport</a> <span>&#45;&gt;</span> <a href="index.html#type-response_hdr">response_hdr</a> <span>&#45;&gt;</span> <span>unit Lwt.t</span></code></dt></dl></div></body></html>